#:import Window kivy.core.window.Window

<TransparentButton>
    size_hint: None, None
    default_size_x: "48dp"
    default_size_y: "48dp"  
    size: (self.default_size_x, self.default_size_y)
    opacity: 0.5
    

<AudioToolbarButton>
    # icon_size: self.parent.height- 2*self.parent.padding[1]
    # y: (self.parent.height - self.height) / 2  # set y position to halfway down parent widget
    
<MyToolbar>
    is_active: False
    resize_reader_window: False
    duration: 0.2

<PlayerScreen>:
    name: "player"

    ReaderWindow:
        id: reader_window
        markup: True
        text: 'test tes tes tes ets estevste ste tasf asfsdfhajsdflsadkflnasdjkflasdjf'
        halign: 'left'
        valign: 'top'
        size_hint: None, None
        pos_hint: {'left': 1, 'top': 1}
        size: Window.width, Window.height
        text_size: self.size
        padding: 40, 40 # make this into a setting
        canvas.before:
            Color:
                rgba:1,0,0,0.2
            Rectangle:
                pos:self.pos
                size:self.size

    FloatLayout:
        orientation: "vertical"

        MyToolbar:
            # top toolbar
            id: top_toolbar
            inactive_y: Window.height
            active_y: Window.height - self.height
            size_hint_y: None
            y: self.inactive_y
            height: "48dp"
            padding: "4dp"
            spacing: 0.875 * Window.width

            MDIconButton:
                icon: "keyboard-backspace"
                pos_hint: {"left": 0}
                on_release:
                    app.root.transition.direction = "right"
                    app.root.current = "library"

            MDIconButton:
                icon: "dots-vertical"
                pos_hint: {"right": 1}
                on_release:
                    app.open_settings()

        MyToolbar:
            # audio toolbar
            id: audio_toolbar
            inactive_y: -self.height
            active_y: 0
            resize_reader_window: True
            orientation: "horizontal"
            size_hint_y: None
            height: "48dp"
            padding: "4dp"
            spacing: "4dp"
            y: self.inactive_y

            AudioToolbarButton:
                icon: "triangle-small-up"
                on_release:
                    # Add your code here

            AudioToolbarButton:
                icon: "step-backward"
                on_release:
                    # Add your code here

            AudioToolbarButton:
                icon: 'play'

            AudioToolbarButton:
                icon: 'step-forward'

            AudioToolbarButton:
                icon: "triangle-small-down"
                on_release:
                    # Add your code here

        TransparentButton:
            id: audio_toolbar_show_button
            pos_hint: {"left": 1, "bottom": 1}
            text: "+"
            on_release:
                root.ids.audio_toolbar.toggle_toolbar()

                


        TransparentButton:
            id: top_toolbar_show_button
            pos_hint: {"right": 1, "top": 1}
            text: "+"
            on_release:
                root.ids.top_toolbar.toggle_toolbar()

        TransparentButton:
            id: next_button
            pos_hint: {"right": 1, "bottom": 1}
            text: "next"
            on_release:
                # next page

        TransparentButton:
            id: prev_button
            pos_hint: {"left": 1, "top": 1}
            text: "prev"
            on_release:
                # previous page
